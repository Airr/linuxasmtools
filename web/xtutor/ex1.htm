&nbsp;&nbsp;&nbsp;extern env_stack<br>
&nbsp;&nbsp;&nbsp;extern crt_write<br>
&nbsp;&nbsp;&nbsp;extern x_list_extension<br>
&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;global _start<br>
&nbsp;&nbsp;&nbsp;_start:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env_stack
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;save ptr to environment<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_list_extension;get x server
extensions<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show_extensions ;display extensions<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eax,01
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;exit function<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;byte 80h
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;exit program<br>
&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;;------------------------------------------------<br>
&nbsp;&nbsp;&nbsp;;subroutine to display list of x server extensions<br>
&nbsp;&nbsp;&nbsp;;inputs: ecx = ptr to reply from x server<br>
&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;show_extensions:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lea
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;esi,[ecx+32]
&nbsp;&nbsp;&nbsp;;get ptr to extension<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xor
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eax,eax<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;al,[ecx+1]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;get number of extensions<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ebp,eax
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;save count<br>
&nbsp;&nbsp;&nbsp;show_loop:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line_feed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lea
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ecx,[esi+1]
&nbsp;&nbsp;&nbsp;&nbsp;;get ptr to extension name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xor
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edx,edx<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dl,[esi]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;get length of name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;esi,edx
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;move to next name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inc
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;esi
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;move
to next name<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crt_write
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;display extension<br>
&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dec
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ebp
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;dec
extension count<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jnz
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show_loop
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;loop if more names<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line_feed
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;add final line feed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret<br>
&nbsp;&nbsp;&nbsp;;-----------------------------------------------<br>
&nbsp;&nbsp;&nbsp;;subroutine to display line-feed<br>
&nbsp;&nbsp;&nbsp;;inputs: registers esi,ebp must be<br>
&nbsp;&nbsp;&nbsp;; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preserved<br>
&nbsp;&nbsp;&nbsp;line_feed:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ecx,linefeed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mov
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edx,1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crt_write<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ret<br>
&nbsp;&nbsp;&nbsp;;-----------<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[section .data]<br>
&nbsp;&nbsp;&nbsp;linefeed: &nbsp;&nbsp;&nbsp;db 0ah<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[section .text]<br>
